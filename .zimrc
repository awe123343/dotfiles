# ============================================================================
# Zim Configuration
# https://zimfw.sh/
# ============================================================================

# ----------------
# Module options
# ----------------

# Set input mode to 'emacs' or 'vi'.
zstyle ':zim:input' double-dot-expand yes

# Disable automatic widget re-binding on each precmd for speed
zstyle ':zim:completion' dumpfile "${ZDOTDIR:-${HOME}}/.zcompdump-${ZSH_VERSION}"

# ----------------
# Core modules
# ----------------

# Sets sane Zsh built-in environment options.
zmodule environment

# Applies correct bindkeys for input events.
zmodule input

# Sets a custom terminal title.
zmodule termtitle

# Utility aliases and functions. Adds colour to ls, grep and less.
zmodule utility

# ----------------
# Prompt (load early for instant prompt)
# ----------------

# Powerlevel10k theme
zmodule romkatv/powerlevel10k --use degit

# ----------------
# Deferred loading
# ----------------

# zsh-defer for deferring slow operations
zmodule romkatv/zsh-defer --use degit

# ----------------
# Completion
# ----------------

# Additional completion definitions for Zsh.
zmodule zsh-users/zsh-completions --fpath src

# Enables and configures smart and extensive tab completion.
# completion must be sourced after all modules that add completion definitions.
zmodule completion

# ----------------
# Oh-My-Zsh plugins (must be AFTER completion for compdef)
# ----------------

# Oh-My-Zsh git library (required by git plugin for git_current_branch etc.)
zmodule ohmyzsh/ohmyzsh --root lib --source git.zsh

# Git aliases and functions
zmodule ohmyzsh/ohmyzsh --root plugins/git

# tmux aliases and utilities
zmodule ohmyzsh/ohmyzsh --root plugins/tmux

# kubectl completion and aliases
zmodule ohmyzsh/ohmyzsh --root plugins/kubectl

# ----------------
# External modules
# ----------------

# History substring search (must be BEFORE syntax highlighting)
zmodule zsh-users/zsh-history-substring-search

# Fish-like autosuggestions for Zsh.
zmodule zsh-users/zsh-autosuggestions

# Fish-like syntax highlighting for Zsh (must be after completion)
zmodule zsh-users/zsh-syntax-highlighting

# Solarized dircolors (requires dircolors/gdircolors)
zmodule joel-porquet/zsh-dircolors-solarized
